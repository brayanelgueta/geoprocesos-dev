System.register(["jimu-core","jimu-core/react","jimu-arcgis"],(function(e,r){var t={},n={},o={};return{setters:[function(e){t.React=e.React},function(e){n.useState=e.useState},function(e){o.JimuMapViewComponent=e.JimuMapViewComponent}],execute:function(){e((()=>{var e={2686:e=>{"use strict";e.exports=o},9244:e=>{"use strict";e.exports=t},8972:e=>{"use strict";e.exports=n}},r={};function a(t){var n=r[t];if(void 0!==n)return n.exports;var o=r[t]={exports:{}};return e[t](o,o.exports,a),o.exports}a.d=(e,r)=>{for(var t in r)a.o(r,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},a.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="";var i={};return a.p=window.jimuConfig.baseUrl,(()=>{"use strict";a.r(i),a.d(i,{__set_webpack_public_path__:()=>j,default:()=>b});var e=a(9244),r=a(8972),t=a(2686);const n={Promise:"undefined"!=typeof window?window.Promise:void 0};var o="4.25",c="next";function s(e){if(e.toLowerCase()===c)return c;var r=e&&e.match(/^(\d)\.(\d+)/);return r&&{major:parseInt(r[1],10),minor:parseInt(r[2],10)}}function u(e){return void 0===e&&(e=o),"https://js.arcgis.com/".concat(e,"/")}function d(e){return!e||s(e)?function(e){void 0===e&&(e=o);var r=u(e),t=s(e);if(t!==c&&3===t.major){var n=t.minor<=10?"js/":"";return"".concat(r).concat(n,"esri/css/esri.css")}return"".concat(r,"esri/themes/light/main.css")}(e):e}function l(e,r){var t=d(e),n=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(t);return n||function(e,r){if(r){var t=document.querySelector(r);t.parentNode.insertBefore(e,t)}else document.head.appendChild(e)}(n=function(e){var r=document.createElement("link");return r.rel="stylesheet",r.href=e,r}(t),r),n}var p={};function f(e,r,t){var n;t&&(n=function(e,r){var t=function(n){r(n.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",t,!1)};return e.addEventListener("error",t,!1),t}(e,t));var o=function(){r(e),e.removeEventListener("load",o,!1),n&&e.removeEventListener("error",n,!1)};e.addEventListener("load",o,!1)}function v(){return document.querySelector("script[data-esri-loader]")}function m(){var e=window.require;return e&&e.on}function g(e){void 0===e&&(e={});var r={};[p,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var t=r.version,o=r.url||u(t);return new n.Promise((function(e,n){var a=v();if(a){var i=a.getAttribute("src");i!==o?n(new Error("The ArcGIS API for JavaScript is already loaded (".concat(i,")."))):m()?e(a):f(a,e,n)}else if(m())n(new Error("The ArcGIS API for JavaScript is already loaded."));else{var c=r.css;if(c)l(!0===c?t:c,r.insertCssBefore);a=function(e){var r=document.createElement("script");return r.type="text/javascript",r.src=e,r.setAttribute("data-esri-loader","loading"),r}(o),f(a,(function(){a.setAttribute("data-esri-loader","loaded"),e(a)}),n),document.body.appendChild(a)}}))}function y(e){return new n.Promise((function(r,t){var n=window.require.on("error",t);window.require(e,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.remove(),r(e)}))}))}function w(e,r){if(void 0===r&&(r={}),m())return y(e);var t=v(),n=t&&t.getAttribute("src");return!r.url&&n&&(r.url=n),g(r).then((function(){return y(e)}))}var h=function(e,r,t,n){return new(t||(t=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function c(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,c)}s((n=n.apply(e,r||[])).next())}))};const b=n=>{var o;const[a,i]=(0,r.useState)(null);return e.React.createElement("div",{className:"widget-demo jimu-widget m-2"},n.useMapWidgetIds&&1===n.useMapWidgetIds.length&&e.React.createElement(t.JimuMapViewComponent,{useMapWidgetId:null===(o=n.useMapWidgetIds)||void 0===o?void 0:o[0],onActiveViewChange:e=>{i(e)}}),e.React.createElement("div",null,e.React.createElement("button",{onClick:()=>h(void 0,void 0,void 0,(function*(){try{const e="http://127.0.0.1:5000/geoprocess_output/test11.geojson";console.log("Cargando GeoJSON desde URL:",e);const r=yield fetch(e),t=yield r.json();console.log("Datos GeoJSON cargados:",t);const[n,o,i,c,s]=yield w(["esri/layers/FeatureLayer","esri/Graphic","esri/geometry/Point","esri/geometry/SpatialReference","esri/smartMapping/renderers/heatmap"]),u=[];let d=0;const l=new c({wkid:102100}),p=a.view.spatialReference;t.features.forEach((e=>{var r;if("Point"===e.geometry.type){const t=new i({x:e.geometry.coordinates[0],y:e.geometry.coordinates[1],spatialReference:l});u.push(new o({geometry:t,attributes:{OBJECTID:d,Nombre:(null===(r=e.properties)||void 0===r?void 0:r.Nombre)||"Sin Nombre"}})),d++}})),console.log(u);const f=new n({title:"Hotspot",source:u,fields:[{name:"ObjectID",alias:"ObjectID",type:"oid"},{name:"Nombre",alias:"Nombre",type:"string"}],objectIdField:"ObjectID",geometryType:"point",spatialReference:p,opacity:1}),{renderer:v}=yield s.createRenderer({layer:f,view:a.view,blurRadius:5});v.referenceScale=a.scale,a?(a.view.map.add(f),f.when((()=>{a.view.goTo(f.fullExtent),console.log("Capa de puntos 'hotspot' cargada correctamente."),v.referenceScale=a.view.scale,f.renderer=v}))):console.error("jimuMapView no est\xe1 configurado.")}catch(e){console.error("Error al cargar la capa:",e),alert("No se pudo cargar la capa. Revisa la URL o la consola.")}}))},"Cargar TIFF como ImageryTileLayer")))};function j(e){a.p=e}})(),i})())}}}));