/*! For license information please see widget.js.LICENSE.txt */
System.register(["jimu-core/react","jimu-arcgis","jimu-ui"],(function(e,t){var n={},a={},i={};return Object.defineProperty(n,"__esModule",{value:!0}),{setters:[function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))},function(e){a.JimuMapViewComponent=e.JimuMapViewComponent},function(e){i.Button=e.Button,i.Loading=e.Loading,i.MultiRangeSlider=e.MultiRangeSlider,i.Select=e.Select}],execute:function(){e((()=>{var e={3512:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(1601),i=n.n(a),r=n(6314),l=n.n(r)()(i());l.push([e.id,".widgetMask{background-color:#052042;width:100%;height:100%;margin:0;padding:15px;overflow:hidden;color:white}.interHome{height:75%;width:100%;justify-content:left;text-align:left;padding-top:10px}.contentSliceMask-Base{height:100%;min-height:180px;justify-content:left;display:flex;flex-direction:column;width:100%;padding:.3rem}.contentSliceMask{display:flex;flex-direction:column;justify-content:space-between;width:100%;height:20px;margin-top:20px;margin-bottom:20px;.slider input{color:#008ecc}}.contentSliceMaskPri{width:100%;height:20px;display:flex;justify-content:space-between;align-items:center}.label1Mask{width:80px;height:20px;text-align:center;font-size:12px}.rangeInputMask{height:20px;width:400px;height:.5em;display:block;background-image:linear-gradient(to right, rgba(0, 0, 0, 0.4039215686) calc((var(--value) + 1) * 50%), #004a98 0);border-radius:3px}.centerMask{text-align:center}.rightMask{text-align:center}.porcentajeClassMask{width:80px}.intermedioNegativo{width:75%;margin-left:25%}.intermedioPositivo{width:75%;text-align:end;height:20px}.selectClassIndice{justify-content:space-between;display:flex;margin-bottom:15px}.selectClassIndice label{width:200px;font-size:13px;height:23px;padding-top:5px}.selectClassIndice select{width:70%;max-width:400px;&:hover{color:#fff}}.contentBtnVolver{padding-top:5%}.btnWidgetsPri{text-decoration:none;border:none;box-shadow:none;height:30px;width:auto;border-radius:5px;font-weight:700;background-color:rgb(15, 89, 194);border:solid 2px rgb(78, 151, 255);color:white}#contentIndicesNomales{width:100%;height:100%}.btnMask{background-color:#6a6969;color:white;width:auto;height:30px;text-decoration:none;border:none;margin:6px;border-radius:5px;padding:6px 20px;display:flex;text-align:center;justify-content:center;align-items:center}#contentConsultaBai{display:flex;justify-content:space-between}.spectral-index-description{width:100%;height:100%;display:flex;justify-content:start;align-items:start;p{margin:0;padding:0;font-size:14px;color:#fff}}.mask-buttons{display:flex;justify-content:flex-start;gap:1rem;width:35%;margin-top:auto;button{background-color:#1a5276;flex:0 0 auto;padding:.5rem 2rem;height:2rem;width:100%;transition:all .3s ease;&:hover{border:1px solid #008ecc;background-color:#052042 !important;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1)}}}.slider{padding:0}.slider-marks{position:relative;width:100%;height:12px;margin-bottom:4px;padding:0 .3rem;display:flex;justify-content:space-between;align-items:flex-end}.slider-mark{position:relative;width:2px;height:8px;background:#fff;opacity:.7;border-radius:1px;z-index:2}.slider-labels{position:relative;width:100%;height:20px;margin-top:2px}.slider-label{position:absolute;top:0;transform:translateX(-50%);font-size:12px;color:#fff;white-space:nowrap;pointer-events:none}.multi-range-slider{input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#1a5276}}.multi-range-slider--range{background:#008ecc !important;height:4px;opacity:1}.multi-range-slider--track{height:4px !important}",""]);const o=l},6314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,i,r){"string"==typeof e&&(e=[[null,e,void 0]]);var l={};if(a)for(var o=0;o<this.length;o++){var d=this[o][0];null!=d&&(l[d]=!0)}for(var u=0;u<e.length;u++){var s=[].concat(e[u]);a&&l[s[0]]||(void 0!==r&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=r),n&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=n):s[2]=n),i&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=i):s[4]="".concat(i)),t.push(s))}},t}},1601:e=>{"use strict";e.exports=function(e){return e[1]}},5072:e=>{"use strict";var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var r={},l=[],o=0;o<e.length;o++){var d=e[o],u=a.base?d[0]+a.base:d[0],s=r[u]||0,c="".concat(u," ").concat(s);r[u]=s+1;var v=n(c),f={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==v)t[v].references++,t[v].updater(f);else{var p=i(f,a);a.byIndex=o,t.splice(o,0,{identifier:c,updater:p,references:1})}l.push(c)}return l}function i(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var r=a(e=e||[],i=i||{});return function(e){e=e||[];for(var l=0;l<r.length;l++){var o=n(r[l]);t[o].references--}for(var d=a(e,i),u=0;u<r.length;u++){var s=n(r[u]);0===t[s].references&&(t[s].updater(),t.splice(s,1))}r=d}}},7659:e=>{"use strict";var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},5056:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,i&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},1113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},7154:(e,t,n)=>{"use strict";var a=n(8972);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=a.useSyncExternalStore,l=a.useRef,o=a.useEffect,d=a.useMemo,u=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,a,s){var c=l(null);if(null===c.current){var v={hasValue:!1,value:null};c.current=v}else v=c.current;c=d((function(){function e(e){if(!o){if(o=!0,r=e,e=a(e),void 0!==s&&v.hasValue){var t=v.value;if(s(t,e))return l=t}return l=e}if(t=l,i(r,e))return t;var n=a(e);return void 0!==s&&s(t,n)?t:(r=e,l=n)}var r,l,o=!1,d=void 0===n?null:n;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]}),[t,n,a,s]);var f=r(e,c[0],c[1]);return o((function(){v.hasValue=!0,v.value=f}),[f]),u(f),f}},8418:(e,t,n)=>{"use strict";e.exports=n(7154)},2686:e=>{"use strict";e.exports=a},8972:e=>{"use strict";e.exports=n},4321:e=>{"use strict";e.exports=i}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={id:n,exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="",r.nc=void 0;var l={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(l),r.d(l,{__set_webpack_public_path__:()=>Q,default:()=>K});var e=r(8972),t=r(2686);const n={Promise:"undefined"!=typeof window?window.Promise:void 0};var a="4.25",i="next";function o(e){if(e.toLowerCase()===i)return i;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function d(e){return void 0===e&&(e=a),"https://js.arcgis.com/".concat(e,"/")}function u(e){return!e||o(e)?function(e){void 0===e&&(e=a);var t=d(e),n=o(e);if(n!==i&&3===n.major){var r=n.minor<=10?"js/":"";return"".concat(t).concat(r,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function s(e,t){var n=u(e),a=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(n);return a||function(e,t){if(t){var n=document.querySelector(t);n.parentNode.insertBefore(e,n)}else document.head.appendChild(e)}(a=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(n),t),a}var c={};function v(e,t,n){var a;n&&(a=function(e,t){var n=function(a){t(a.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",n,!1)};return e.addEventListener("error",n,!1),n}(e,n));var i=function(){t(e),e.removeEventListener("load",i,!1),a&&e.removeEventListener("error",a,!1)};e.addEventListener("load",i,!1)}function f(){return document.querySelector("script[data-esri-loader]")}function p(){var e=window.require;return e&&e.on}function m(e){void 0===e&&(e={});var t={};[c,e].forEach((function(e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}));var a=t.version,i=t.url||d(a);return new n.Promise((function(e,n){var r=f();if(r){var l=r.getAttribute("src");l!==i?n(new Error("The ArcGIS API for JavaScript is already loaded (".concat(l,")."))):p()?e(r):v(r,e,n)}else if(p())n(new Error("The ArcGIS API for JavaScript is already loaded."));else{var o=t.css;if(o)s(!0===o?a:o,t.insertCssBefore);r=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(i),v(r,(function(){r.setAttribute("data-esri-loader","loaded"),e(r)}),n),document.body.appendChild(r)}}))}function b(e){return new n.Promise((function(t,n){var a=window.require.on("error",n);window.require(e,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];a.remove(),t(e)}))}))}var g=r(5072),h=r.n(g),y=r(7825),w=r.n(y),x=r(7659),S=r.n(x),B=r(5056),E=r.n(B),$=r(540),k=r.n($),M=r(1113),I=r.n(M),N=r(3512),C={};C.styleTagTransform=I(),C.setAttributes=E(),C.insert=S().bind(null,"head"),C.domAPI=w(),C.insertStyleElement=k();h()(N.A,C);N.A&&N.A.locals&&N.A.locals;var _=r(8418),j="default"in e?e.default:e,R=Symbol.for("react-redux-context"),D="undefined"!=typeof globalThis?globalThis:{};function O(){if(!j.createContext)return{};const e=D[R]??(D[R]=new Map);let t=e.get(j.createContext);return t||(t=j.createContext(null),e.set(j.createContext,t)),t}var A=O(),F=()=>{throw new Error("uSES not initialized!")};function P(e=A){return function(){return j.useContext(e)}}var L=P(),T=F,W=(e,t)=>e===t;function q(e=A){const t=e===A?L:P(e),n=(e,n={})=>{const{equalityFn:a=W,devModeChecks:i={}}="function"==typeof n?{equalityFn:n}:n;const{store:r,subscription:l,getServerState:o,stabilityCheck:d,identityFunctionCheck:u}=t(),s=(j.useRef(!0),j.useCallback({[e.name]:t=>e(t)}[e.name],[e,d,i.stabilityCheck])),c=T(l.addNestedSub,r.getState,o||r.getState,s,a);return j.useDebugValue(c),c};return Object.assign(n,{withTypes:()=>n}),n}var V=q();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");var z=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),J="undefined"!=typeof navigator&&"ReactNative"===navigator.product;z||J?j.useLayoutEffect:j.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var G;G=_.useSyncExternalStoreWithSelector,T=G,(e=>{0})(e.useSyncExternalStore);var U=r(4321);const H={es:{widgetLabel:"\xcdndices espectrales",spectralRule:"Debes seleccionar una imagen para utilizar los indices espectrales",selectName:"Selecciona f\xf3rmula:",ndvi:"\xcdndice normalizado de vegetaci\xf3n",savi:"\xcdndice de vegetaci\xf3n ajustado al suelo",ndwi:"\xcdndice de agua de diferencia normalizada",bai:"\xcdndice de \xe1reas quemadas",apply:"Aplicar"},en:{widgetLabel:"Spectral indices",spectralRule:"You must select an image to use the spectral indices",selectName:"Select formula:",ndvi:"Normalized vegetation index",savi:"Soil-adjusted vegetation index",ndwi:"Normalized difference water index",bai:"Burned Area Index",apply:"Apply"}};var Y=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function l(e){try{d(a.next(e))}catch(e){r(e)}}function o(e){try{d(a.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}d((a=a.apply(e,t||[])).next())}))};const X=[{id:"worldview",title:"Worldview2",bands:[{name:"Coastal(1)",value:"1"},{name:"Blue(2)",value:"2"},{name:"Green(3)",value:"3"},{name:"Yellow(4)",value:"4"},{name:"Red(5)",value:"5"},{name:"Red Edge(6)",value:"6"},{name:"NIR -1(7)",value:"7"},{name:"NIR -2(8)",value:"8"}]},{id:"fasat",title:"OWD_FasatC_MS_v2_20250312",bands:[{name:"Red(1)",value:"1"},{name:"Green(2)",value:"2"},{name:"Blue(3)",value:"3"},{name:"NIR(4)",value:"4"}]},{id:"default",title:"Default",bands:[{name:"Blue(1)",value:"1"},{name:"Green(2)",value:"2"},{name:"Red(3)",value:"3"},{name:"NIR(4)",value:"4"}]}],K=n=>{const{t:a}=function(t){const n=new URLSearchParams(window.location.search).get("locale")||"es";return{t:(0,e.useMemo)((()=>e=>{var a;return null!==(a=t[n][e])&&void 0!==a?a:e}),[n]),locale:n}}(H),i=V((e=>{var t;return null===(t=e.myState)||void 0===t?void 0:t.selectedImages})),r=V((e=>{var t;return null===(t=e.myState)||void 0===t?void 0:t.selectedSensor})),l=V((e=>{var t;return null===(t=e.myState)||void 0===t?void 0:t.geoprocess})),[o,d]=(0,e.useState)(null),[u,s]=(0,e.useState)(0),[c,v]=(0,e.useState)(.5),[g,h]=(0,e.useState)(1),[y,w]=(0,e.useState)(-1),[x,S]=(0,e.useState)("(b4 - b1) / (b4 + b1)"),[B,E]=(0,e.useState)([0,255,0,255]),[$,k]=(0,e.useState)(!1),[M,I]=(0,e.useState)(!1),[N,C]=(0,e.useState)(X),[_,j]=(0,e.useState)(!1),R=(0,e.useRef)(null),D=(0,e.useRef)(null),O=()=>{var e;if(k(!0),i.length>0){let t=null===(e=i[0])||void 0===e?void 0:e.OBJECTID;if(null!==t&&o&&D.current){const{ImageryLayer:e,RasterFunction:n,RasterStretchRenderer:i}=D.current,l=o.view.map.findLayerById(null==r?void 0:r.id);console.log({imageryLayer:l});const d=l.url,s=`OBJECTID IN (${t})`,v=new n({functionName:"BandArithmetic",outputPixelType:"F32",functionArguments:{Method:0,BandIndexes:x}}),f=new n({functionName:"Remap",outputPixelType:"F32",functionArguments:{Raster:v,InputRanges:[u,c],OutputValues:[2],NoDataRanges:[-1/0,y,g,1/0],AllowUnmatched:!1}}),p=new i({stretchType:"min-max",statistics:[{min:y,max:g,avg:(y+g)/2,stddev:.1}],colorRamp:{type:"algorithmic",fromColor:[255,255,255,0],toColor:B}}),m=new e({url:d,id:"\xcdndices espectrales",visible:!0,title:a("widgetLabel"),definitionExpression:s}),b=o.view.map.findLayerById("\xcdndices espectrales");b&&o.view.map.remove(b),o.view.map.add(m),m.rasterFunction=f,m.renderer=p,R.current=m,m.when((()=>{k(!1)}),(e=>{console.error("Error cargando el layer:",e),k(!1)}))}}},A=()=>{o&&function(e,t){if(void 0===t&&(t={}),p())return b(e);var n=f(),a=n&&n.getAttribute("src");return!t.url&&a&&(t.url=a),m(t).then((function(){return b(e)}))}(["esri/layers/support/RasterFunction","esri/renderers/RasterStretchRenderer","esri/layers/ImageryLayer","esri/rest/query","esri/widgets/Histogram","esri/request"]).then((([e,t,n,a,i,r])=>{D.current={RasterFunction:e,RasterStretchRenderer:t,ImageryLayer:n,query:a,Histogram:i,esriRequest:r}})).catch((e=>{console.error("Error loading ESRI modules: ",e)}))},F=()=>{if(r){const e=o.view.map.findLayerById("\xcdndices espectrales");e&&o.view.map.remove(e)}};return(0,e.useEffect)((()=>{var e,t,n,a,i,l,o,d,u,c,f,p;if(F(),r){const s=N.find((e=>e.title===r.title||"Default"===e.title));"Worldview2"===(null==s?void 0:s.title)&&S(`(B${null===(e=s.bands[6])||void 0===e?void 0:e.value} - B${null===(t=s.bands[4])||void 0===t?void 0:t.value}) / (B${null===(n=s.bands[6])||void 0===n?void 0:n.value} + B${null===(a=s.bands[4])||void 0===a?void 0:a.value})`),"OWD_FasatC_MS_v2_20250312"===(null==s?void 0:s.title)&&S(`(B${null===(i=s.bands[3])||void 0===i?void 0:i.value} - B${null===(l=s.bands[0])||void 0===l?void 0:l.value}) / (B${null===(o=s.bands[3])||void 0===o?void 0:o.value} + B${null===(d=s.bands[0])||void 0===d?void 0:d.value})`),"Default"===(null==s?void 0:s.title)&&S(`(B${null===(u=s.bands[3])||void 0===u?void 0:u.value} - B${null===(c=s.bands[2])||void 0===c?void 0:c.value}) / (B${null===(f=s.bands[3])||void 0===f?void 0:f.value} + B${null===(p=s.bands[2])||void 0===p?void 0:p.value})`)}E([0,255,0,255]),h(1),w(-1),s(.3),v(.7)}),[r,l]),(0,e.useEffect)((()=>{A()}),[o]),(0,e.useEffect)((()=>{var e,t,n,a,l,d,u,c,f,p,m,b;if(i.length>0){if(r){const i=N.find((e=>e.title===r.title||"Default"===e.title));"Worldview2"===(null==i?void 0:i.title)&&S(`(B${null===(e=i.bands[6])||void 0===e?void 0:e.value} - B${null===(t=i.bands[4])||void 0===t?void 0:t.value}) / (B${null===(n=i.bands[6])||void 0===n?void 0:n.value} + B${null===(a=i.bands[4])||void 0===a?void 0:a.value})`),"OWD_FasatC_MS_v2_20250312"===(null==i?void 0:i.title)&&S(`(B${null===(l=i.bands[3])||void 0===l?void 0:l.value} - B${null===(d=i.bands[0])||void 0===d?void 0:d.value}) / (B${null===(u=i.bands[3])||void 0===u?void 0:u.value} + B${null===(c=i.bands[0])||void 0===c?void 0:c.value})`),"Default"===(null==i?void 0:i.title)&&S(`(B${null===(f=i.bands[3])||void 0===f?void 0:f.value} - B${null===(p=i.bands[2])||void 0===p?void 0:p.value}) / (B${null===(m=i.bands[3])||void 0===m?void 0:m.value} + B${null===(b=i.bands[2])||void 0===b?void 0:b.value})`)}E([0,255,0,255]),h(1),w(-1),s(.3),v(.7)}if(0===i.length&&o){const e=o.view.map.findLayerById("\xcdndices espectrales");e&&o.view.map.remove(e)}}),[i,r]),(0,e.useEffect)((()=>{M&&(k(!0),Y(void 0,void 0,void 0,(function*(){var e,t,n,a,l,o;k(!0);try{var d=`/proxy?proceso=5&Entrada=${i[0].OBJECTID}&url=${r.url}`;const u=yield fetch(d,{method:"GET"}),c=yield u.json(),f=yield fetch(`${c.urlJson}`,{method:"GET"}),p=yield f.json();if(r){const i=X.find((e=>e.title===r.title));"Worldview2"===(null==i?void 0:i.title)&&S(`1 / (((0,1 - B${null===(e=i.bands[4])||void 0===e?void 0:e.value})^2) + ((0,06 - B${null===(t=i.bands[6])||void 0===t?void 0:t.value})^2))`),"OWD_FasatC_MS_v2_20250312"===(null==i?void 0:i.title)&&S(`1 / (((0,1 - B${null===(n=i.bands[0])||void 0===n?void 0:n.value})^2) + ((0,06 - B${null===(a=i.bands[3])||void 0===a?void 0:a.value})^2))`),"Default"===(null==i?void 0:i.title)&&S(`1 / (((0,1 - B${null===(l=i.bands[2])||void 0===l?void 0:l.value})^2) + ((0,06 - B${null===(o=i.bands[3])||void 0===o?void 0:o.value})^2))`)}console.log(p),E([255,0,0,255]),w(parseFloat(p.etiquetas.etiqueta_1)),s(parseFloat(p.etiquetas.etiqueta_3)),v(parseFloat(p.etiquetas.etiqueta_4)),h(parseFloat(p.etiquetas.etiqueta_5))}catch(e){console.error("Error al enviar la solicitud:",e),k(!1)}})).finally((()=>{k(!1)})))}),[M]),e.default.createElement("div",{className:"jimu-widget widgetMask"},n.useMapWidgetIds&&1===n.useMapWidgetIds.length&&e.default.createElement(t.JimuMapViewComponent,{useMapWidgetId:n.useMapWidgetIds[0],onActiveViewChange:e=>{e&&d(e)}}),e.default.createElement("div",{className:"homeMask"},e.default.createElement("div",null,e.default.createElement("h4",null,a("widgetLabel"))),0===i.length?e.default.createElement("div",{className:"spectral-index-description"},e.default.createElement("p",null,a("spectralRule"))):e.default.createElement("div",{id:"activeMask2"},e.default.createElement("div",{className:"contentSliceMask-Base"},e.default.createElement("div",{className:"selectClassIndice"},e.default.createElement("label",{htmlFor:"formulaSelect"},a("selectName")),e.default.createElement(U.Select,{id:"formulaSelect",onChange:e=>{var t,n,a,i,l,o,d,u,c,f,p,m,b,g,y,x,B,$,k,M,C,_,R,D,O,A,P,L,T,W,q,V,z,J,G,U;j(!1),F();switch(e.target.value){case"NDVI":if(I(!1),r){const e=N.find((e=>e.title===r.title||"Default"===e.title));"Worldview2"===(null==e?void 0:e.title)&&S(`(B${null===(t=e.bands[6])||void 0===t?void 0:t.value} - B${null===(n=e.bands[4])||void 0===n?void 0:n.value}) / (B${null===(a=e.bands[6])||void 0===a?void 0:a.value} + B${null===(i=e.bands[4])||void 0===i?void 0:i.value})`),"OWD_FasatC_MS_v2_20250312"===(null==e?void 0:e.title)&&S(`(B${null===(l=e.bands[3])||void 0===l?void 0:l.value} - B${null===(o=e.bands[0])||void 0===o?void 0:o.value}) / (B${null===(d=e.bands[3])||void 0===d?void 0:d.value} + B${null===(u=e.bands[0])||void 0===u?void 0:u.value})`),"Default"===(null==e?void 0:e.title)&&S(`(B${null===(c=e.bands[3])||void 0===c?void 0:c.value} - B${null===(f=e.bands[2])||void 0===f?void 0:f.value}) / (B${null===(p=e.bands[3])||void 0===p?void 0:p.value} + B${null===(m=e.bands[2])||void 0===m?void 0:m.value})`)}E([0,255,0,255]),h(1),w(-1),s(.3),v(.7);break;case"SAVI":if(I(!1),r){const e=N.find((e=>e.title===r.title||"Default"===e.title));"Worldview2"===(null==e?void 0:e.title)&&S(`((B${null===(b=e.bands[6])||void 0===b?void 0:b.value} - B${null===(g=e.bands[4])||void 0===g?void 0:g.value}) / (B${null===(y=e.bands[6])||void 0===y?void 0:y.value} + B${null===(x=e.bands[4])||void 0===x?void 0:x.value} + 0,5)) * (1 + 0,5)`),"OWD_FasatC_MS_v2_20250312"===(null==e?void 0:e.title)&&S(`((B${null===(B=e.bands[3])||void 0===B?void 0:B.value} - B${null===($=e.bands[0])||void 0===$?void 0:$.value}) / (B${null===(k=e.bands[3])||void 0===k?void 0:k.value} + B${null===(M=e.bands[0])||void 0===M?void 0:M.value} + 0,5)) * (1 + 0,5)`),"Default"===(null==e?void 0:e.title)&&S(`((B${null===(C=e.bands[3])||void 0===C?void 0:C.value} - B${null===(_=e.bands[2])||void 0===_?void 0:_.value}) / (B${null===(R=e.bands[3])||void 0===R?void 0:R.value} + B${null===(D=e.bands[2])||void 0===D?void 0:D.value} + 0,5)) * (1 + 0,5)`)}E([255,255,0,255]),h(1.5),w(-1.5),s(.3),v(.7);break;case"NDWI":if(I(!1),r){const e=N.find((e=>e.title===r.title||"Default"===e.title));"Worldview2"===(null==e?void 0:e.title)&&S(`(B${null===(O=e.bands[2])||void 0===O?void 0:O.value} - B${null===(A=e.bands[6])||void 0===A?void 0:A.value}) / (B${null===(P=e.bands[2])||void 0===P?void 0:P.value} + B${null===(L=e.bands[6])||void 0===L?void 0:L.value})`),"OWD_FasatC_MS_v2_20250312"===(null==e?void 0:e.title)&&S(`(B${null===(T=e.bands[1])||void 0===T?void 0:T.value} - B${null===(W=e.bands[3])||void 0===W?void 0:W.value}) / (B${null===(q=e.bands[1])||void 0===q?void 0:q.value} + B${null===(V=e.bands[3])||void 0===V?void 0:V.value})`),"Default"===(null==e?void 0:e.title)&&S(`(B${null===(z=e.bands[1])||void 0===z?void 0:z.value} - B${null===(J=e.bands[3])||void 0===J?void 0:J.value}) / (B${null===(G=e.bands[1])||void 0===G?void 0:G.value} + B${null===(U=e.bands[3])||void 0===U?void 0:U.value})`)}E([0,0,255,255]),h(1),w(-1),s(.3),v(.7);break;case"BAI":I(!0)}},size:"sm",defaultValue:"NDVI"},e.default.createElement("option",{value:"NDVI"},a("ndvi")," - NDVI"),e.default.createElement("option",{value:"SAVI"},a("savi")," - SAVI"),e.default.createElement("option",{value:"NDWI"},a("ndwi")," - NDWI"),e.default.createElement("option",{value:"BAI"},a("bai")))),e.default.createElement("div",{className:"contentSliceMask"},e.default.createElement(U.MultiRangeSlider,{"aria-label":"Multi range slider",maxValue:c,minValue:u,max:g,min:y,onAcceptValue:()=>{},onChange:(e,t,n)=>{return a=t,s(e),v(a),void O();var a},step:M?1e-5:.05,tooltip:!0}),e.default.createElement("div",{className:"slider-marks"},e.default.createElement("div",{className:"slider-mark"}),e.default.createElement("div",{className:"slider-mark"}),e.default.createElement("div",{className:"slider-mark"}),e.default.createElement("div",{className:"slider-mark"}),e.default.createElement("div",{className:"slider-mark"})),e.default.createElement("div",{className:"contentSliceMaskPri"},e.default.createElement("label",{className:"label1Mask"},y.toFixed(4)),e.default.createElement("label",{className:"label1Mask"},(g/2+y).toFixed(4)),e.default.createElement("label",{className:"centerMask label1Mask"},((y+g)/2).toFixed(4)),e.default.createElement("label",{className:"label1Mask"},(g/2).toFixed(4)),e.default.createElement("label",{className:"rightMask label1Mask"},g.toFixed(4)))),e.default.createElement("div",{className:"mask-buttons"},!0===$?e.default.createElement(U.Button,{size:"sm",type:"primary"},e.default.createElement(U.Loading,{type:"DONUT",height:20,width:20})):e.default.createElement(U.Button,{onClick:()=>{O(),j(!0)},size:"sm",type:"primary"},a("apply")))))))};function Q(e){r.p=e}})(),l})())}}}));