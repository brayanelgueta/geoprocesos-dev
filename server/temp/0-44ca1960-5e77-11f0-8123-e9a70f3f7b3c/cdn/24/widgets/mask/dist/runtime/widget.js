/*! For license information please see widget.js.LICENSE.txt */
System.register(["jimu-core/react","jimu-arcgis","jimu-ui"],(function(e,t){var n={},r={},a={};return Object.defineProperty(n,"__esModule",{value:!0}),{setters:[function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))},function(e){r.JimuMapViewComponent=e.JimuMapViewComponent},function(e){a.Button=e.Button,a.Loading=e.Loading,a.Select=e.Select}],execute:function(){e((()=>{var e={3512:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(1601),a=n.n(r),o=n(6314),i=n.n(o)()(a());i.push([e.id,".widgetMask{background-color:#052042;width:100%;height:100%;margin:0;padding:15px;overflow:hidden;color:white}.interHome{height:75%;width:100%;justify-content:left;text-align:left;padding-top:10px}.contentSliceMask-Base{height:80px;justify-content:left;display:block}.contentSliceMask{display:block;width:100%;height:20px}.contentSliceMaskPri{width:100%;height:20px;display:flex}.label1Mask{width:80px;height:20px}.rangeInputMask{height:20px;width:400px;height:.5em;display:block;background-image:linear-gradient(to right, rgba(0, 0, 0, 0.4039215686) calc((var(--value) + 1) * 50%), #004a98 0);border-radius:3px}.centerMask{text-align:center}.rightMask{text-align:right}.porcentajeClassMask{width:80px}.intermedioNegativo{width:75%;margin-left:25%}.intermedioPositivo{width:75%;text-align:end;height:20px}.selectClassIndice{justify-content:space-between;display:flex;margin-bottom:15px}.selectClassIndice label{width:200px;font-size:13px;height:23px;padding-top:5px}.selectClassIndice select{width:70%;max-width:400px;&:hover{color:#fff}}.contentBtnVolver{padding-top:5%}.btnWidgetsPri{text-decoration:none;border:none;box-shadow:none;height:30px;width:auto;border-radius:5px;font-weight:700;background-color:rgb(15, 89, 194);border:solid 2px rgb(78, 151, 255);color:white}#contentIndicesNomales{width:100%;height:100%}.btnMask{background-color:#6a6969;color:white;width:auto;height:30px;text-decoration:none;border:none;margin:6px;border-radius:5px;padding:6px 20px;display:flex;text-align:center;justify-content:center;align-items:center}#contentConsultaBai{display:flex;justify-content:space-between}.spectral-index-description{width:100%;height:100%;display:flex;justify-content:start;align-items:start;p{margin:0;padding:0;font-size:14px;color:#fff}}.mask-buttons{display:flex;justify-content:flex-end;gap:1rem;width:50%;button{background-color:#1a5276;flex:1;padding:.5rem 1rem;height:2rem;margin:1rem;transition:all .3s ease;&:hover{border:1px solid #008ecc;background-color:#052042 !important;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1)}}}",""]);const l=i},6314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var l=0;l<this.length;l++){var u=this[l][0];null!=u&&(i[u]=!0)}for(var s=0;s<e.length;s++){var d=[].concat(e[s]);r&&i[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},1601:e=>{"use strict";e.exports=function(e){return e[1]}},1873:(e,t,n)=>{var r=n(9325).Symbol;e.exports=r},2552:(e,t,n)=>{var r=n(1873),a=n(659),o=n(9350),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},4128:(e,t,n)=>{var r=n(1800),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},4840:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},659:(e,t,n)=>{var r=n(1873),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,l=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var a=i.call(e);return r&&(t?e[l]=n:delete e[l]),a}},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9325:(e,t,n)=>{var r=n(4840),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();e.exports=o},1800:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},8221:(e,t,n)=>{var r=n(3805),a=n(124),o=n(9374),i=Math.max,l=Math.min;e.exports=function(e,t,n){var u,s,d,c,v,f,p=0,m=!1,b=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=u,r=s;return u=s=void 0,p=t,c=e.apply(r,n)}function g(e){var n=e-f;return void 0===f||n>=t||n<0||b&&e-p>=d}function x(){var e=a();if(g(e))return w(e);v=setTimeout(x,function(e){var n=t-(e-f);return b?l(n,d-(e-p)):n}(e))}function w(e){return v=void 0,h&&u?y(e):(u=s=void 0,c)}function S(){var e=a(),n=g(e);if(u=arguments,s=this,f=e,n){if(void 0===v)return function(e){return p=e,v=setTimeout(x,t),m?y(e):c}(f);if(b)return clearTimeout(v),v=setTimeout(x,t),y(f)}return void 0===v&&(v=setTimeout(x,t)),c}return t=o(t)||0,r(n)&&(m=!!n.leading,d=(b="maxWait"in n)?i(o(n.maxWait)||0,t):d,h="trailing"in n?!!n.trailing:h),S.cancel=function(){void 0!==v&&clearTimeout(v),p=0,u=f=s=v=void 0},S.flush=function(){return void 0===v?c:w(a())},S}},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},4394:(e,t,n)=>{var r=n(2552),a=n(346);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},124:(e,t,n)=>{var r=n(9325);e.exports=function(){return r.Date.now()}},9374:(e,t,n)=>{var r=n(4128),a=n(3805),o=n(4394),i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=l.test(e);return n||u.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}},5072:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},i=[],l=0;l<e.length;l++){var u=e[l],s=r.base?u[0]+r.base:u[0],d=o[s]||0,c="".concat(s," ").concat(d);o[s]=d+1;var v=n(c),f={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==v)t[v].references++,t[v].updater(f);else{var p=a(f,r);r.byIndex=l,t.splice(l,0,{identifier:c,updater:p,references:1})}i.push(c)}return i}function a(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var l=n(o[i]);t[l].references--}for(var u=r(e,a),s=0;s<o.length;s++){var d=n(o[s]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=u}}},7659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},5056:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},1113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},7154:(e,t,n)=>{"use strict";var r=n(8972);var a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useSyncExternalStore,i=r.useRef,l=r.useEffect,u=r.useMemo,s=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,d){var c=i(null);if(null===c.current){var v={hasValue:!1,value:null};c.current=v}else v=c.current;c=u((function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==d&&v.hasValue){var t=v.value;if(d(t,e))return i=t}return i=e}if(t=i,a(o,e))return t;var n=r(e);return void 0!==d&&d(t,n)?t:(o=e,i=n)}var o,i,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,n,r,d]);var f=o(e,c[0],c[1]);return l((function(){v.hasValue=!0,v.value=f}),[f]),s(f),f}},8418:(e,t,n)=>{"use strict";e.exports=n(7154)},2686:e=>{"use strict";e.exports=r},8972:e=>{"use strict";e.exports=n},4321:e=>{"use strict";e.exports=a}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={id:n,exports:{}};return e[n](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="",o.nc=void 0;var i={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(i),o.d(i,{__set_webpack_public_path__:()=>Z,default:()=>X});var e=o(8972),t=o(2686);const n={Promise:"undefined"!=typeof window?window.Promise:void 0};var r="4.25",a="next";function l(e){if(e.toLowerCase()===a)return a;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function u(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function s(e){return!e||l(e)?function(e){void 0===e&&(e=r);var t=u(e),n=l(e);if(n!==a&&3===n.major){var o=n.minor<=10?"js/":"";return"".concat(t).concat(o,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function d(e,t){var n=s(e),r=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(n);return r||function(e,t){if(t){var n=document.querySelector(t);n.parentNode.insertBefore(e,n)}else document.head.appendChild(e)}(r=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(n),t),r}var c={};function v(e,t,n){var r;n&&(r=function(e,t){var n=function(r){t(r.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",n,!1)};return e.addEventListener("error",n,!1),n}(e,n));var a=function(){t(e),e.removeEventListener("load",a,!1),r&&e.removeEventListener("error",r,!1)};e.addEventListener("load",a,!1)}function f(){return document.querySelector("script[data-esri-loader]")}function p(){var e=window.require;return e&&e.on}function m(e){void 0===e&&(e={});var t={};[c,e].forEach((function(e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}));var r=t.version,a=t.url||u(r);return new n.Promise((function(e,n){var o=f();if(o){var i=o.getAttribute("src");i!==a?n(new Error("The ArcGIS API for JavaScript is already loaded (".concat(i,")."))):p()?e(o):v(o,e,n)}else if(p())n(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=t.css;if(l)d(!0===l?r:l,t.insertCssBefore);o=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(a),v(o,(function(){o.setAttribute("data-esri-loader","loaded"),e(o)}),n),document.body.appendChild(o)}}))}function b(e){return new n.Promise((function(t,n){var r=window.require.on("error",n);window.require(e,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.remove(),t(e)}))}))}var h=o(8221),y=o.n(h),g=o(5072),x=o.n(g),w=o(7825),S=o.n(w),E=o(7659),B=o.n(E),$=o(5056),I=o.n($),j=o(540),M=o.n(j),N=o(1113),C=o.n(N),k=o(3512),_={};_.styleTagTransform=C(),_.setAttributes=I(),_.insert=B().bind(null,"head"),_.domAPI=S(),_.insertStyleElement=M();x()(k.A,_);k.A&&k.A.locals&&k.A.locals;var O=o(8418),R="default"in e?e.default:e,T=Symbol.for("react-redux-context"),F="undefined"!=typeof globalThis?globalThis:{};function P(){if(!R.createContext)return{};const e=F[T]??(F[T]=new Map);let t=e.get(R.createContext);return t||(t=R.createContext(null),e.set(R.createContext,t)),t}var D=P(),A=()=>{throw new Error("uSES not initialized!")};function q(e=D){return function(){return R.useContext(e)}}var W=q(),L=A,V=(e,t)=>e===t;function z(e=D){const t=e===D?W:q(e),n=(e,n={})=>{const{equalityFn:r=V,devModeChecks:a={}}="function"==typeof n?{equalityFn:n}:n;const{store:o,subscription:i,getServerState:l,stabilityCheck:u,identityFunctionCheck:s}=t(),d=(R.useRef(!0),R.useCallback({[e.name]:t=>e(t)}[e.name],[e,u,a.stabilityCheck])),c=L(i.addNestedSub,o.getState,l||o.getState,d,r);return R.useDebugValue(c),c};return Object.assign(n,{withTypes:()=>n}),n}var J=z();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");var G=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),U="undefined"!=typeof navigator&&"ReactNative"===navigator.product;G||U?R.useLayoutEffect:R.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var H;H=O.useSyncExternalStoreWithSelector,L=H,(e=>{0})(e.useSyncExternalStore);var Y=o(4321),K=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))};const Q=[{id:"worldview",title:"Worldview2",bands:[{name:"Coastal(1)",value:"1"},{name:"Blue(2)",value:"2"},{name:"Green(3)",value:"3"},{name:"Yellow(4)",value:"4"},{name:"Red(5)",value:"5"},{name:"Red Edge(6)",value:"6"},{name:"NIR -1(7)",value:"7"},{name:"NIR -2(8)",value:"8"}]},{id:"fasat",title:"OWD_FasatC_MS_v2_20250312",bands:[{name:"Red(1)",value:"1"},{name:"Green(2)",value:"2"},{name:"Blue(3)",value:"3"},{name:"NIR(4)",value:"4"}]},{id:"default",title:"Default",bands:[{name:"Blue(1)",value:"1"},{name:"Green(2)",value:"2"},{name:"Red(3)",value:"3"},{name:"NIR(4)",value:"4"}]}],X=n=>{const r=J((e=>{var t;return null===(t=e.myState)||void 0===t?void 0:t.selectedImages})),a=J((e=>{var t;return null===(t=e.myState)||void 0===t?void 0:t.selectedSensor})),o=J((e=>{var t;return null===(t=e.myState)||void 0===t?void 0:t.geoprocess})),[i,l]=(0,e.useState)(null),[u,s]=(0,e.useState)(.5),[d,c]=(0,e.useState)(-.5),[v,h]=(0,e.useState)(.5),[g,x]=(0,e.useState)(1),[w,S]=(0,e.useState)(-1),[E,B]=(0,e.useState)("(b4 - b1) / (b4 + b1)"),[$,I]=(0,e.useState)([0,255,0,255]),[j,M]=(0,e.useState)(!1),[N,C]=(0,e.useState)(!1),[k,_]=(0,e.useState)(Q),O=(0,e.useRef)(null),R=(0,e.useRef)(null),T=(0,e.useRef)(null),F=()=>K(void 0,void 0,void 0,(function*(){if(i&&O.current&&R.current){const{RasterFunction:e,RasterStretchRenderer:t}=R.current,n=new e({functionName:"BandArithmetic",outputPixelType:"F32",functionArguments:{Method:0,BandIndexes:E}}),r=new e({functionName:"Remap",outputPixelType:"F32",functionArguments:{Raster:n,InputRanges:[u,g],OutputValues:[1],NoDataRanges:[-1/0,u,g,1/0],AllowUnmatched:!1}}),a=new t({stretchType:"min-max",statistics:[{min:u,max:g,avg:(u+g)/2,stddev:.1}],colorRamp:{type:"algorithmic",fromColor:[255,255,255,0],toColor:$}});O.current.rasterFunction=r,O.current.renderer=a}(()=>{var e;if(M(!0),r.length>0){let t=null===(e=r[0])||void 0===e?void 0:e.OBJECTID;if(null!==t&&i&&R.current){const{ImageryLayer:e,RasterFunction:n,RasterStretchRenderer:r}=R.current,o=i.view.map.findLayerById(null==a?void 0:a.id).url,l=`OBJECTID IN (${t})`,s=new n({functionName:"BandArithmetic",outputPixelType:"F32",functionArguments:{Method:0,BandIndexes:E}}),d=new n({functionName:"Remap",outputPixelType:"F32",functionArguments:{Raster:s,InputRanges:[u,g],OutputValues:[2],NoDataRanges:[-1/0,u,g,1/0],AllowUnmatched:!1}}),c=new r({stretchType:"min-max",statistics:[{min:u,max:g,avg:(u+g)/2,stddev:.1}],colorRamp:{type:"algorithmic",fromColor:[255,255,255,0],toColor:$}}),v=new e({url:o,id:"\xcdndices espectrales",visible:!0,title:"\xcdndices espectrales",definitionExpression:l}),f=i.view.map.findLayerById("\xcdndices espectrales");f&&i.view.map.remove(f),i.view.map.add(v),v.rasterFunction=d,v.renderer=c,O.current=v,v.when((()=>{M(!1)}),(e=>{console.error("Error cargando el layer:",e),M(!1)}))}}})()})),P=()=>{i&&function(e,t){if(void 0===t&&(t={}),p())return b(e);var n=f(),r=n&&n.getAttribute("src");return!t.url&&r&&(t.url=r),m(t).then((function(){return b(e)}))}(["esri/layers/support/RasterFunction","esri/renderers/RasterStretchRenderer","esri/layers/ImageryLayer","esri/rest/query","esri/widgets/Histogram","esri/request"]).then((([e,t,n,r,a,o])=>{R.current={RasterFunction:e,RasterStretchRenderer:t,ImageryLayer:n,query:r,Histogram:a,esriRequest:o}})).catch((e=>{console.error("Error loading ESRI modules: ",e)}))};return(0,e.useEffect)((()=>{if(a){const e=i.view.map.findLayerById("\xcdndices espectrales");e&&i.view.map.remove(e)}}),[a,o]),(0,e.useEffect)((()=>{P()}),[i]),(0,e.useEffect)((()=>{const e=T.current;if(e){e.style.setProperty("--value",e.value);const t=t=>{e.style.setProperty("--value",e.value)};return e.addEventListener("input",t,!1),()=>{e.removeEventListener("input",t,!1)}}}),[u,r]),(0,e.useEffect)((()=>{var e,t,n,o,l,u,d,c,v,f,p,m;if(r.length>0){if(a){const r=k.find((e=>e.title===a.title||"Default"===e.title));"Worldview2"===(null==r?void 0:r.title)&&B(`(B${null===(e=r.bands[6])||void 0===e?void 0:e.value} - B${null===(t=r.bands[4])||void 0===t?void 0:t.value}) / (B${null===(n=r.bands[6])||void 0===n?void 0:n.value} + B${null===(o=r.bands[4])||void 0===o?void 0:o.value})`),"OWD_FasatC_MS_v2_20250312"===(null==r?void 0:r.title)&&B(`(B${null===(l=r.bands[3])||void 0===l?void 0:l.value} - B${null===(u=r.bands[0])||void 0===u?void 0:u.value}) / (B${null===(d=r.bands[3])||void 0===d?void 0:d.value} + B${null===(c=r.bands[0])||void 0===c?void 0:c.value})`),"Default"===(null==r?void 0:r.title)&&B(`(B${null===(v=r.bands[3])||void 0===v?void 0:v.value} - B${null===(f=r.bands[2])||void 0===f?void 0:f.value}) / (B${null===(p=r.bands[3])||void 0===p?void 0:p.value} + B${null===(m=r.bands[2])||void 0===m?void 0:m.value})`)}I([0,255,0,255]),x(1),S(-1),s(.5)}if(0===r.length&&i){const e=i.view.map.findLayerById("\xcdndices espectrales");e&&i.view.map.remove(e)}}),[r,a]),(0,e.useEffect)((()=>{N&&(M(!0),K(void 0,void 0,void 0,(function*(){var e,t,n,o,i,l;M(!0);try{var u=`http://127.0.0.1:5000/proxy?proceso=5&Entrada=${r[0].OBJECTID}&url=${a.url}`;const d=yield fetch(u,{method:"GET"}),v=yield d.json(),f=yield fetch(`http://127.0.0.1:5000${v.urlJson}`,{method:"GET"}),p=yield f.json();if(a){const r=Q.find((e=>e.title===a.title));"Worldview2"===(null==r?void 0:r.title)&&B(`1 / (((0,1 - B${null===(e=r.bands[4])||void 0===e?void 0:e.value})^2) + ((0,06 - B${null===(t=r.bands[6])||void 0===t?void 0:t.value})^2))`),"OWD_FasatC_MS_v2_20250312"===(null==r?void 0:r.title)&&B(`1 / (((0,1 - B${null===(n=r.bands[0])||void 0===n?void 0:n.value})^2) + ((0,06 - B${null===(o=r.bands[3])||void 0===o?void 0:o.value})^2))`),"Default"===(null==r?void 0:r.title)&&B(`1 / (((0,1 - B${null===(i=r.bands[2])||void 0===i?void 0:i.value})^2) + ((0,06 - B${null===(l=r.bands[3])||void 0===l?void 0:l.value})^2))`)}I([255,0,0,255]),x(parseFloat(p.etiquetas.etiqueta_5)),S(parseFloat(p.etiquetas.etiqueta_1)),s(parseFloat(p.etiquetas.etiqueta_3)),c(parseFloat(p.etiquetas.etiqueta_2)),h(parseFloat(p.etiquetas.etiqueta_4))}catch(e){console.error("Error al enviar la solicitud:",e),M(!1)}})).finally((()=>M(!1))))}),[N]),e.default.createElement("div",{className:"jimu-widget widgetMask"},n.useMapWidgetIds&&1===n.useMapWidgetIds.length&&e.default.createElement(t.JimuMapViewComponent,{useMapWidgetId:n.useMapWidgetIds[0],onActiveViewChange:e=>{e&&l(e)}}),e.default.createElement("div",{className:"homeMask"},e.default.createElement("div",null,e.default.createElement("h4",null,"\xcdndices espectrales")),0===r.length?e.default.createElement("div",{className:"spectral-index-description"},e.default.createElement("p",null,"Debes seleccionar una imagen para utilizar los indices espectrales")):e.default.createElement("div",{id:"activeMask2"},e.default.createElement("div",{className:"contentSliceMask-Base"},e.default.createElement("div",{className:"selectClassIndice"},e.default.createElement("label",{htmlFor:"formulaSelect"},"Selecciona f\xf3rmula:"),e.default.createElement(Y.Select,{id:"formulaSelect",onChange:e=>{var t,n,r,o,i,l,u,d,c,v,f,p,m,b,h,y,g,w,E,$,j,M,N,_,O,R,T,F,P,D,A,q,W,L,V,z;switch(e.target.value){case"NDVI":if(C(!1),a){const e=k.find((e=>e.title===a.title||"Default"===e.title));"Worldview2"===(null==e?void 0:e.title)&&B(`(B${null===(t=e.bands[6])||void 0===t?void 0:t.value} - B${null===(n=e.bands[4])||void 0===n?void 0:n.value}) / (B${null===(r=e.bands[6])||void 0===r?void 0:r.value} + B${null===(o=e.bands[4])||void 0===o?void 0:o.value})`),"OWD_FasatC_MS_v2_20250312"===(null==e?void 0:e.title)&&B(`(B${null===(i=e.bands[3])||void 0===i?void 0:i.value} - B${null===(l=e.bands[0])||void 0===l?void 0:l.value}) / (B${null===(u=e.bands[3])||void 0===u?void 0:u.value} + B${null===(d=e.bands[0])||void 0===d?void 0:d.value})`),"Default"===(null==e?void 0:e.title)&&B(`(B${null===(c=e.bands[3])||void 0===c?void 0:c.value} - B${null===(v=e.bands[2])||void 0===v?void 0:v.value}) / (B${null===(f=e.bands[3])||void 0===f?void 0:f.value} + B${null===(p=e.bands[2])||void 0===p?void 0:p.value})`)}I([0,255,0,255]),x(1),S(-1),s(.5);break;case"SAVI":if(C(!1),a){const e=k.find((e=>e.title===a.title||"Default"===e.title));"Worldview2"===(null==e?void 0:e.title)&&B(`((B${null===(m=e.bands[6])||void 0===m?void 0:m.value} - B${null===(b=e.bands[4])||void 0===b?void 0:b.value}) / (B${null===(h=e.bands[6])||void 0===h?void 0:h.value} + B${null===(y=e.bands[4])||void 0===y?void 0:y.value} + 0,5)) * (1 + 0,5)`),"OWD_FasatC_MS_v2_20250312"===(null==e?void 0:e.title)&&B(`((B${null===(g=e.bands[3])||void 0===g?void 0:g.value} - B${null===(w=e.bands[0])||void 0===w?void 0:w.value}) / (B${null===(E=e.bands[3])||void 0===E?void 0:E.value} + B${null===($=e.bands[0])||void 0===$?void 0:$.value} + 0,5)) * (1 + 0,5)`),"Default"===(null==e?void 0:e.title)&&B(`((B${null===(j=e.bands[3])||void 0===j?void 0:j.value} - B${null===(M=e.bands[2])||void 0===M?void 0:M.value}) / (B${null===(N=e.bands[3])||void 0===N?void 0:N.value} + B${null===(_=e.bands[2])||void 0===_?void 0:_.value} + 0,5)) * (1 + 0,5)`)}I([255,255,0,255]),x(1),S(-1),s(.5);break;case"NDWI":if(C(!1),a){const e=k.find((e=>e.title===a.title||"Default"===e.title));"Worldview2"===(null==e?void 0:e.title)&&B(`(B${null===(O=e.bands[2])||void 0===O?void 0:O.value} - B${null===(R=e.bands[6])||void 0===R?void 0:R.value}) / (B${null===(T=e.bands[2])||void 0===T?void 0:T.value} + B${null===(F=e.bands[6])||void 0===F?void 0:F.value})`),"OWD_FasatC_MS_v2_20250312"===(null==e?void 0:e.title)&&B(`(B${null===(P=e.bands[1])||void 0===P?void 0:P.value} - B${null===(D=e.bands[3])||void 0===D?void 0:D.value}) / (B${null===(A=e.bands[1])||void 0===A?void 0:A.value} + B${null===(q=e.bands[3])||void 0===q?void 0:q.value})`),"Default"===(null==e?void 0:e.title)&&B(`(B${null===(W=e.bands[1])||void 0===W?void 0:W.value} - B${null===(L=e.bands[3])||void 0===L?void 0:L.value}) / (B${null===(V=e.bands[1])||void 0===V?void 0:V.value} + B${null===(z=e.bands[3])||void 0===z?void 0:z.value})`)}I([0,0,255,255]),x(1),S(-1),s(.5);break;case"BAI":C(!0)}},size:"sm",defaultValue:"NDVI"},e.default.createElement("option",{value:"NDVI"},"\xcdndice normalizado de vegetaci\xf3n - NDVI"),e.default.createElement("option",{value:"SAVI"},"\xcdndice de vegetaci\xf3n ajustado al suelo - SAVI"),e.default.createElement("option",{value:"NDWI"},"\xcdndice de agua de diferencia normalizada - NDWI"),e.default.createElement("option",{value:"BAI"},"\xcdndice de \xe1reas quemadas"))),e.default.createElement("div",{id:"contentIndicesNomales"},e.default.createElement("label",{htmlFor:"rangoPixel"},"Valores de \xcdndice espectral: ",e.default.createElement("span",null,u.toFixed(4))),e.default.createElement("div",{className:"contentSliceMask"},e.default.createElement("div",{className:"contentSliceMaskPri"},e.default.createElement("input",{type:"range",className:"rangeInputMask",min:w,max:g,step:"0.00001",id:"rangoPixel",value:u,onChange:e=>{const t=parseFloat(e.target.value);s(t),T.current&&T.current.style.setProperty("--value",t),y()(F,500)},ref:T})),e.default.createElement("div",{className:"contentSliceMaskPri"},e.default.createElement("label",{className:" label1Mask"},w.toFixed(4)),e.default.createElement("div",{className:"porcentajeClassMask"},e.default.createElement("label",{className:"intermedioNegativo"},(g/2+w).toFixed(4))),e.default.createElement("label",{className:"centerMask label1Mask"},((w+g)/2).toFixed(4)),e.default.createElement("div",{className:"porcentajeClassMask"},e.default.createElement("label",{className:"intermedioPositivo"},(g/2).toFixed(4))),e.default.createElement("label",{className:"rightMask label1Mask"},g.toFixed(4))))),e.default.createElement("div",{className:"mask-buttons"},!0===j?e.default.createElement(Y.Button,{size:"sm",type:"primary"},e.default.createElement(Y.Loading,{type:"DONUT",height:20,width:20})):e.default.createElement(Y.Button,{onClick:F,size:"sm",type:"primary"},"Aplicar"))))))};function Z(e){o.p=e}})(),i})())}}}));